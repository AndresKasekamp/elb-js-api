import{fo as b,s as p,bW as g,fp as N,bO as A,bP as v}from"./index-J0iiHjMT.js";class m{constructor(r,e,t){this.assetName=r,this.assetMimeType=e,this.parts=t}equals(r){return this===r||this.assetName===r.assetName&&this.assetMimeType===r.assetMimeType&&b(this.parts,r.parts,(e,t)=>e.equals(t))}isOnService(r){return this.parts.every(e=>e.isOnService(r))}makeHash(){let r="";for(const e of this.parts)r+=e.partHash;return r}async toBlob(r){const{parts:e}=this;if(e.length===1)return e[0].toBlob(r);const t=await Promise.all(e.map(a=>a.toBlob(r)));return p(r),new Blob(t)}}class H{constructor(r,e){this.partUrl=r,this.partHash=e}equals(r){return this===r||this.partUrl===r.partUrl&&this.partHash===r.partHash}isOnService(r){return this.partUrl.startsWith(`${r.path}/assets/`)}async toBlob(r){const{data:e}=await g(this.partUrl,{responseType:"blob"});return p(r),e}}function M(s){return $(s==null?void 0:s.source)}function u(s){return Array.isArray(s)?s.every(r=>r instanceof m):!1}const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,f=/\.(gltf|glb)/i;function $(s){return s?Array.isArray(s)?s.some(l):l(s):!1}function l(s){if(s instanceof File){const{type:r,name:e}=s;return c.test(r)||f.test(e)}return c.test(s.assetMimeType)||f.test(s.assetName)}function O(s,r){if(!s)return!1;const{source:e}=s;return T(e,r)}function U(s,r){if(s===r)return!0;const{source:e}=s,{source:t}=r;if(e===t)return!0;if(u(e)&&u(t)){if(e.length!==t.length)return!1;const a=(n,o)=>n.assetName<o.assetName?-1:n.assetName>o.assetName?1:0,i=[...e].sort(a),y=[...t].sort(a);for(let n=0;n<i.length;++n)if(!i[n].equals(y[n]))return!1;return!0}return!1}function T(s,r){if(Array.isArray(s)){const e=s;return e.length>0&&e.every(t=>h(t,r))}return h(s,r)}function h(s,r){return s instanceof m&&s.isOnService(r)}function q(s,r){return s instanceof File?N(s,r):A(s.assetMimeType,r)??v(s.assetName,r)}function S(s){return Array.isArray(s)?s:[s]}function d(s){return!!s.original}export{S as A,q as N,O as h,m as i,H as o,M as u,d as v,U as y};
